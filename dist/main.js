"use strict";(self.webpackChunkbattleship=self.webpackChunkbattleship||[]).push([[179],{674:(e,t,a)=>{const r=()=>{const e=document.getElementById("app"),t=document.createElement("section"),a=document.createElement("div");t.className="start-card",a.className="content-container",(e=>{const t=document.createElement("h1");t.textContent="BATTLESHIP",e.appendChild(t)})(a),(e=>{const t=document.createElement("form");t.className="name-form";const a=document.createElement("input");a.type="text",a.id="name-input",a.className="name-input",a.placeholder="Captains's Name";const r=document.createElement("span");r.className="input-border",t.appendChild(a),t.appendChild(r),e.appendChild(t)})(a),(e=>{const t=document.createElement("button");t.id="play-button",t.className="play-button";const a=document.createElement("span");a.className="text-play-button",a.textContent="ENTER ARENA",t.appendChild(a),e.appendChild(t)})(a),t.appendChild(a),e.appendChild(t)},n=(()=>{const e=(e,t)=>{if("X"===t){const t=document.createElement("div");t.classList="numberx-container",[0,1,2,3,4,5,6,7,8,9].forEach((e=>{const a=document.createElement("div");a.classList="number",a.textContent=e,t.appendChild(a)})),e.appendChild(t)}else if("Y"===t){const t=document.createElement("div");t.classList="numbery-container",[0,1,2,3,4,5,6,7,8,9].forEach((e=>{const a=document.createElement("div");a.classList="number",a.textContent=e,t.appendChild(a)})),e.appendChild(t)}};return{deleteContent:()=>{document.getElementById("app").replaceChildren("")},loadBoard:(t,a)=>{const r=document.createElement("div");r.id=`board-${a}`,r.classList.add("board",a),e(r,"X"),e(r,"Y"),(e=>{const t=document.createElement("field-container");t.className="field-container";for(let e=0;e<10;e+=1)for(let e=0;e<10;e+=1){const e=document.createElement("div");e.className="field",t.appendChild(e)}e.appendChild(t)})(r),t.appendChild(r)}}})(),s=(e,t)=>{let a=!1,r=0,n=!1;const s=()=>{a=!0};return{length:t,hit:()=>{r+=1,r===t&&s()},getName:()=>e,sunk:s,name:e,getLength:()=>t,getHits:()=>r,sunkStatus:()=>a,found:()=>n,gotFound:()=>{n=!0}}},d=e=>{const t=(()=>{const e=new Array(10).fill("x").map((()=>new Array(10).fill("x"))),t=[],a=[],r=e=>a.filter((t=>t.getName()===e))[0],n=e=>{switch(e.getName()){case"carrier":a.push(s("carrier",5));break;case"battleship":a.push(s("battleship",4));break;case"cruiser":a.push(s("cruiser",3));break;case"submarine":a.push(s("submarine",3));break;default:a.push(s("destroyer",2))}},d=(e,t,a)=>e>t-a;return{board:e,placeShip:(t,a,r,s)=>{let o=t.getLength();const c=[];if(!0===s){if(d(o,(void 0).board.length,r))return!1;for(let t=r;t<e.length;t++){if("x"!==e[a][t])return!1;if(c.push([a,t]),o-=1,0===o)break}c.forEach((a=>{const[r,n]=a;e[r][n]=`${t.getName()}X`})),n(t)}if(!1===s){if(d(o,(void 0).board.length,a))return!1;for(let t=a;t<e.length;t++){if("x"!==e[t][r])return!1;if(c.push([t,r]),o-=1,0===o)break}c.forEach((a=>{const[r,n]=a;e[r][n]=`${t.getName()}Y`})),n(t)}},receiveAttack:(a,n)=>{((a,n)=>{switch(e[a][n]){case"carrierX":case"carrierY":r("carrier").hit();break;case"battleshipX":case"battleshipY":r("battleship").hit();break;case"cruiserX":case"cruiserY":r("cruiser").hit();break;case"submarineX":case"submarineY":r("submarine").hit();break;case"destroyerX":case"destroyerY":r("destroyer").hit();break;default:e[a][n]="miss",t.push([a,n])}})(a,n)},getShip:r,missedTarget:t,allSunk:()=>5===a.filter((e=>!0===e.sunkStatus())).length,getBoard:()=>e}})();let a=0,r=e;const n=()=>r,d=(e,a)=>"x"===t.board[e][a],o=()=>Math.floor(10*Math.random());return{play:(e,r)=>{"cpu"!==n().toLowerCase()?d(e,r)&&(t.receiveAttack(e,r),a+=1):(()=>{let e=!0;for(;e;){const r=o(),n=o();d(r,n)&&(e=!1,t.receiveAttack(r,n),a+=1)}})()},getTurn:()=>a,getName:n,setName:e=>{r=e},board:t,getBoard:()=>t}},o=(()=>{const e=e=>{const t=d(e),a=d("cpu");return{getCPU:()=>a,getPlayer:()=>t,player:t,cpu:a}},t=()=>e(),a=()=>t;return{initializeGame:e,state:t,getState:a,setPlayerName:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Captain";return a().getPlayer().setName(e)}}})(),c=a.p+"img/Battleship760c9f3bc4ab40b1b74e.svg",i=a.p+"img/Carrier72d6f7560d865eeed3bb.svg",l=a.p+"img/Cruiser390b447eb179df065dab.svg",u=a.p+"img/Destroyer90deea9d8b35a7e34f19.svg",m=a.p+"img/Submarine64bc48ca397dd3949db7.svg",b={loadSetupMaterial:()=>{const e=document.getElementById("app");e.classList.add("setup");const t=document.createElement("div");t.id="setup-container",t.className="setup-container",(e=>{const t=document.createElement("div");t.className="axis-button-container";const a=document.createElement("button");a.id="x-button",a.className="axis-button",a.textContent="X";const r=document.createElement("button");r.id="y-button",r.className="axis-button",r.textContent="Y",t.appendChild(a),t.appendChild(r),e.appendChild(t)})(t);const a=document.createElement("div");a.className="board-fleet-container",n.loadBoard(a,"setup"),(e=>{const t=document.createElement("section");t.id="fleet-setup",t.className="fleet-setup",["batttleship","carrier","cruiser","destroyer","submarine"].forEach((e=>{const a=(e=>{const t=document.createElement("button"),a=document.createElement("img"),r=document.createElement("p");switch(t.classList.add("ship-card",e),a.className="ship-image",r.className="ship-name",e){case"carrier":t.dataset.shipName="carrier",t.dataset.shipLength=5,a.src=i,r.textContent="Carrier";break;case"cruiser":t.dataset.shipName="cruiser",t.dataset.shipLength=3,a.src=l,r.textContent="Cruiser";break;case"destroyer":t.dataset.shipName="destroyer",t.dataset.shipLength=2,a.src=u,r.textContent="Destroyer";break;case"submarine":t.dataset.shipName="submarine",t.dataset.shipLength=3,a.src=m,r.textContent="Submarine";break;default:t.dataset.shipName="battleship",t.dataset.shipLength=4,a.src=c,r.textContent="Battleship"}return t.appendChild(a),t.appendChild(r),t})(e);t.appendChild(a)})),e.appendChild(t)})(a),t.appendChild(a),e.appendChild(t)}},p=b,h=()=>{const e=(e,t)=>{switch(e){case"battleship":if(t.found.battleship)return;(e=>{e.board.style.backroundImage+=""===e.board.style.backroundImage?`url(${c})`:`, url(${c})`,e.board.style.backroundSize+=""===e.board.style.backroundSize?"50% 10%":", 50% 10%";const t=`${20*e.j}% ${11*e.i+e.i/10}%`;e.board.style.backroudPos+=""===e.board.style.backroudPos?`${t}`:`, ${t}`,e.found.battleship=!0})(t);break;case"carrier":if(t.found.carrier)return;(e=>{e.board.style.backroundImage+=""===e.board.style.backroundImage?`url(${i})`:`, url(${i})`,e.board.style.backroundSize+=""===e.board.style.backroundSize?"30% 10%":", 30% 10%";const t=`${15*e.j-(e.j/2+e.j/5)}% ${11*e.i+e.i/10}%`;e.board.style.backroudPos+=""===e.board.style.backroudPos?`${t}`:`, ${t}`,e.found.carrier=!0})(t);break;case"cruiser":if(t.found.cruiser)return;(e=>{e.board.style.backroundImage+=""===e.board.style.backroundImage?`url(${l})`:`, url(${l})`,e.board.style.backroundSize+=""===e.board.style.backroundSize?"30% 10%":", 30% 10%";const t=`${15*e.j-(e.j/2+e.j/5)}% ${11*e.i+e.i/10}%`;e.board.style.backroudPos+=""===e.board.style.backroudPos?`${t}`:`, ${t}`,e.found.cruiser=!0})(t);break;case"destroyer":if(t.found.destroyer)return;(e=>{e.board.style.backroundImage+=""===e.board.style.backroundImage?`url(${u})`:`, url(${u})`,e.board.style.backroundSize+=""===e.board.style.backroundSize?"50% 10%":", 50% 10%";const t=`${20*e.j}% ${11*e.i+e.i/10}%`;e.board.style.backroudPos+=""===e.board.style.backroudPos?`${t}`:`, ${t}`,e.found.destroyer=!0})(t);break;case"submarine":if(t.found.submarine)return;(e=>{e.board.style.backroundImage+=""===e.board.style.backroundImage?`url(${m})`:`, url(${m})`,e.board.style.backroundSize+=""===e.board.style.backroundSize?"50% 10%":", 50% 10%";const t=`${20*e.j}% ${11*e.i+e.i/10}%`;e.board.style.backroudPos+=""===e.board.style.backroudPos?`${t}`:`, ${t}`,e.found.submarine=!0})(t)}};return{loadShipsOnBoard:e,loadFleet:(t,a)=>{const r=document.getElementById("field-container");for(let n=0;n<a.length;n+=1)for(let s=0;s<a[0].length;s+=1)"x"!==a[n][s]&&e(a[n][s],{foundObj:t,board:r,i:n,j:s})}}},g=(e,t,a)=>{(e=>{document.getElementById("fleet-setup").childNodes.forEach((t=>{t.addEventListener("dragstart",(()=>{e.name=t.dataset.shipName,e.length=t.dataset.shipLength}))}))})(e),document.getElementById("field-container").childNodes.forEach((e=>{e.addEventListener("dragover",(e=>{e.preventDefault()}))})),((e,t,a)=>{document.getElementById("field-container").childNodes.forEach(((r,n)=>{r.addEventListener("drop",(()=>{const r=parseInt(n/10,10),d=n%10,o=a.placeShip(s(e.name,e.length,r,d,!0));if(h.loadFleet(t,a),o){const t=document.querySelector(`[data-ship-name=${e.name}]`);console.log(t),t.style.visibility="hidden"}console.log(a.getBoard())}))}))})(e,t,a)};(()=>{const e=o.initializeGame(),t={carrier:!1,battleship:!1},a={name:"",length:""},s=()=>{n.deleteContent(),p.loadSetupMaterial(),g(a,t,e.player.getBoard())};return{loadContent:()=>{r(),document.getElementById("play-button").addEventListener("click",s)}}})().loadContent()}},e=>{e(e.s=674)}]);